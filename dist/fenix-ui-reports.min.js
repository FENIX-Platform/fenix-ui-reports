define(["jquery","fenix-ui-bridge","loglevel"],function(t,e,n){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){var i,o;i=[n(2),n(3),n(4),n(5),n(6),n(7),n(8)],o=function(t,e,n,i,o,r,s){"use strict";function a(t){s.info("FENIX reports"),s.info(t);var n=t||{};this.channels={},this.cache=n.cache,this.environment=n.environment,this.silent=n.silent||!1,this.bridge=new e({cache:this.cache,environment:this.environment,params:{language:"EN"},serviceProvider:n.serviceProvider})}var u={metadata:n,table:i,streaming:o,flow:r};return a.prototype.on=function(t,e,n){var i=n||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:i,callback:e}),this},a.prototype.export=function(e){s.info("Export resource"),s.info(e);var n;if(!u.hasOwnProperty(e.format))throw s.error("Invalid format: "+e.format),new Error("please define a valid plugin name");s.info("format: "+e.format),this._$pluginChosen=new u[e.format];var i=this._$pluginChosen.process(e.config);switch(this._trigger("export.start",i),i.hasOwnProperty("options")&&i.options&&null!==i.options&&(n=i.options,delete i.options),e.format){case"streaming":return this.bridge.exportStreaming(i,n).then(t.proxy(this._fulfillRequest,this),t.proxy(this._rejectResponse,this));case"flow":return this.bridge.exportFlow(i,n).then(t.proxy(this._fulfillRequest,this),t.proxy(this._rejectResponse,this));case"table":case"metadata":return this.bridge.export(i,n).then(t.proxy(this._fulfillRequest,this),t.proxy(this._rejectResponse,this))}},a.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),n=0,i=this.channels[t].length;n<i;n++){var o=this.channels[t][n];o.callback.apply(o.context,e)}return this},a.prototype._rejectResponse=function(t){this._trigger("export.error"),s.error("Error on resource export"),s.error(t),this.silent||alert("Error occurred during resource export.")},a.prototype._fulfillRequest=function(t){this._trigger("export.success"),s.info("Resource export success"),s.info(t);var e="table"!==this._$pluginChosen.getName()&&"metadata"!==this._$pluginChosen.getName()?t.url.substr(0,t.url.indexOf("export")+"export".length)+"/"+t.data:t.url+"?id="+this._getParameterByName("id",t.data);window.location=e},a.prototype._getParameterByName=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},a}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){var i,o;i=[n(2)],o=function(t){"use strict";function e(){this.errors={id_not_specified:"please put an id into resource.metadata.uid",plugin_not_exists:"the output plugin does not exists",language_not_exists:"language in the config does not exists",configuration_wrong:"please check the configuration"},this.languagesAdmitted={EN:!0,FR:!0,ES:!0},this.name="metadata",this.CONFIG={resource:{metadata:{},data:[]},input:{plugin:"inputMD",config:{}},output:{plugin:"outputMD",config:{full:!1,lang:"EN"}}}}return e.prototype.process=function(e){return this.validateConfig(e)&&(this.CONFIG=t.extend(!0,{},this.CONFIG,e)),this.CONFIG},e.prototype.validateConfig=function(t){var e=!1;if(!("undefined"!=typeof t.input&&null!==t.input&&t.resource&&t.resource.metadata&&t.resource.metadata.uid&&null!==t.resource.metadata.uid&&""!==t.resource.metadata.uid))throw this.errors.id_not_specified;if(e=!0,t.hasOwnProperty("output")){if(t.output.hasOwnProperty("plugin")||!t.output.hasOwnProperty("config")||!t.output.config.hasOwnProperty("lang")||null===t.output.config.lang||!this.languagesAdmitted[t.output.config.lang])throw this.errors.configuration_wrong;e=!0}return e},e.prototype.getName=function(){return this.name},e}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i,o;i=[n(2)],o=function(t){"use strict";function e(){this.errors={plugin_not_exists:"the output plugin does not exists",data_or_md_not_exists:"please set metadata and data into configuration specified",language_not_exists:"language in the config does not exists",configuration_wrong:"please check the configuration"},this.name="table",this.languagesAdmitted={EN:!0,FR:!0,ES:!0},this.CONFIG={resource:{metadata:{},data:[]},input:{plugin:"inputTable",config:{}},output:{plugin:"outputTable",config:{lang:"EN"}}}}return e.prototype.process=function(e){return this.validateConfig(e)&&(this.CONFIG=t.extend(!0,{},this.CONFIG,e)),this.CONFIG},e.prototype.validateConfig=function(t){var e=!1;if(!("undefined"!=typeof t.input&&null!=t.input&&t.resource&&t.resource.metadata&&t.resource.metadata.uid&&null!==t.resource.metadata.uid&&""!==t.resource.metadata.uid))throw this.errors.data_or_md_not_exists;return e=!0},e.prototype.getName=function(){return this.name},e}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i,o;i=[n(2)],o=function(t){"use strict";function e(){this.errors={plugin_not_exists:"the output plugin does not exists",data_or_md_not_exists:"please set metadata and data into configuration specified",language_not_exists:"language in the config does not exists",configuration_wrong:"please check the configuration"},this.name="streaming",this.languagesAdmitted={EN:!0,FR:!0,ES:!0}}return e.prototype.process=function(e){return this.validateConfig(e)&&(this.CONFIG=t.extend(!0,{},this.CONFIG,e)),this.CONFIG},e.prototype.validateConfig=function(t){return!0},e.prototype.getName=function(){return this.name},e}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e,n){var i,o;i=[n(2)],o=function(t){"use strict";function e(){this.errors={plugin_not_exists:"the output plugin does not exists",data_or_md_not_exists:"please set metadata and data into configuration specified",language_not_exists:"language in the config does not exists",configuration_wrong:"please check the configuration"},this.name="streaming",this.languagesAdmitted={EN:!0,FR:!0,ES:!0}}return e.prototype.process=function(e){return this.validateConfig(e)&&(this.CONFIG=t.extend(!0,{},this.CONFIG,e)),this.CONFIG},e.prototype.validateConfig=function(t){return!0},e.prototype.getName=function(){return this.name},e}.apply(e,i),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=n}])});
//# sourceMappingURL=fenix-ui-reports.min.js.map