define(["jquery","fenix-ui-bridge","loglevel"],function(t,e,n){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){var r,o;r=[n(2),n(3),n(4),n(5),n(6)],o=function(t,e,n,r,o){"use strict";function i(t){o.info("FENIX reports"),o.info(t);var n=t||{};this.channels={},this.cache=n.cache,this.environment=n.environment,this.bridge=new e({cache:this.cache,environment:this.environment})}var s={metadata:n,table:r};return i.prototype.on=function(t,e,n){var r=n||this;return this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:r,callback:e}),this},i.prototype["export"]=function(e){if(o.info("Export resource"),o.info(e),!s.hasOwnProperty(e.format))throw o.error("Invalid format: "+e.format),new Error("please define a valid plugin name");o.info("format: "+e.format),this._$pluginChosen=new s[e.format];var n=this._$pluginChosen.process(e.config);return this._trigger("export.start",n),this.bridge["export"](n).then(t.proxy(this._fulfillRequest,this),t.proxy(this._rejectResponse,this))},i.prototype._trigger=function(t){if(!this.channels[t])return!1;for(var e=Array.prototype.slice.call(arguments,1),n=0,r=this.channels[t].length;n<r;n++){var o=this.channels[t][n];o.callback.apply(o.context,e)}return this},i.prototype._rejectResponse=function(t){this._trigger("export.error"),o.error("Error on resource export"),o.error(t),alert("Error occurred during resource export.")},i.prototype._fulfillRequest=function(t){this._trigger("export.success"),o.info("Resource export success"),o.info(t);var e=t.url+"?"+t.data.substr(t.data.indexOf("id"));window.location=e},i}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){var r,o;r=[n(2)],o=function(t){"use strict";function e(){this.errors={id_not_specified:"please put an id into resource.metadata.uid",plugin_not_exists:"the output plugin does not exists",language_not_exists:"language in the config does not exists",configuration_wrong:"please check the configuration"},this.languagesAdmitted={EN:!0,FR:!0,ES:!0},this.CONFIG={resource:{metadata:{},data:[]},input:{plugin:"inputMD",config:{}},output:{plugin:"outputMD",config:{full:!1,lang:"EN"}}}}return e.prototype.process=function(e){return this.validateConfig(e)&&(this.CONFIG=t.extend(!0,{},this.CONFIG,e)),this.CONFIG},e.prototype.validateConfig=function(t){var e=!1;if(!("undefined"!=typeof t.input&&null!==t.input&&t.resource&&t.resource.metadata&&t.resource.metadata.uid&&null!==t.resource.metadata.uid&&""!==t.resource.metadata.uid))throw this.errors.id_not_specified;if(e=!0,t.hasOwnProperty("output")){if(t.output.hasOwnProperty("plugin")||!t.output.hasOwnProperty("config")||!t.output.config.hasOwnProperty("lang")||null===t.output.config.lang||!this.languagesAdmitted[t.output.config.lang])throw this.errors.configuration_wrong;e=!0}return e},e}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e,n){var r,o;r=[n(2)],o=function(t){"use strict";function e(){this.errors={plugin_not_exists:"the output plugin does not exists",data_or_md_not_exists:"please set metadata and data into configuration specified",language_not_exists:"language in the config does not exists",configuration_wrong:"please check the configuration"},this.languagesAdmitted={EN:!0,FR:!0,ES:!0},this.CONFIG={resource:{metadata:{},data:[]},input:{plugin:"inputTable",config:{}},output:{plugin:"outputTable",config:{lang:"EN"}}}}return e.prototype.process=function(e){return this.validateConfig(e)&&(this.CONFIG=t.extend(!0,{},this.CONFIG,e)),this.CONFIG},e.prototype.validateConfig=function(t){var e=!1;if(!("undefined"!=typeof t.input&&null!=t.input&&t.resource&&t.resource.metadata&&t.resource.metadata.uid&&null!==t.resource.metadata.uid&&""!==t.resource.metadata.uid))throw this.errors.data_or_md_not_exists;return e=!0},e}.apply(e,r),!(void 0!==o&&(t.exports=o))},function(t,e){t.exports=n}])});
//# sourceMappingURL=fenix-ui-reports.min.js.map